/*
 * Deployment script for KYC Transfer Authorizer Smart Contract.
 * Copyright Â© 2018 by Argon Investments Management.
 * Author: Mikhail Vladimirov <mikhail.vladimirov@gmail.com>
 */

if (
	!web3.eth
		.contract([
			{
				constant: true,
				inputs: [
					{ name: '_token', type: 'address' },
					{ name: '_from', type: 'address' },
					{ name: '_to', type: 'address' },
					{ name: '_value', type: 'uint256' }
				],
				name: 'transferAuthorized',
				outputs: [{ name: '', type: 'bool' }],
				payable: false,
				stateMutability: 'view',
				type: 'function'
			},
			{
				constant: false,
				inputs: [{ name: '_addressClassifier', type: 'address' }],
				name: 'setAddressClassifier',
				outputs: [],
				payable: false,
				stateMutability: 'nonpayable',
				type: 'function'
			},
			{
				constant: false,
				inputs: [
					{ name: '_token', type: 'address' },
					{ name: '_unfreezeTime', type: 'uint256' }
				],
				name: 'setUnfreezeTime',
				outputs: [],
				payable: false,
				stateMutability: 'nonpayable',
				type: 'function'
			},
			{
				inputs: [
					{ name: '_owner', type: 'address' },
					{ name: '_addressClassifier', type: 'address' }
				],
				payable: false,
				stateMutability: 'nonpayable',
				type: 'constructor'
			}
		])
		.new(
			owner,
			addressClassifier,
			{
				from: web3.eth.accounts[0],
				data:
					'0x6060604052341561000f57600080fd5b604051604080610405833981016040528080519190602001805160008054600160a060020a03958616600160a060020a0319918216179091556001805495909216941693909317909255505061039b8061006a6000396000f30060606040526004361061003d5763ffffffff60e060020a600035041663735826bf8114610042578063c53f44e914610084578063f3f80d07146100a5575b600080fd5b341561004d57600080fd5b610070600160a060020a03600435811690602435811690604435166064356100c7565b604051901515815260200160405180910390f35b341561008f57600080fd5b6100a3600160a060020a03600435166102ea565b005b34156100b057600080fd5b6100a3600160a060020a0360043516602435610334565b60015460009081908190600160a060020a0316635b046ea287836040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b151561012657600080fd5b6102c65a03f1151561013757600080fd5b5050506040518051600154909350600160a060020a03169050635b046ea28660006040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b151561019d57600080fd5b6102c65a03f115156101ae57600080fd5b505050604051805191505060018214156101e35760018114806101d15750600281145b806101dc5750600381145b92506102e0565b60028214156102c6576101f461036b565b600160a060020a038816600090815260026020526040902054111561021c57600092506102e0565b600381141561022e57600192506102e0565b600181148061023d5750600281145b156102bd578387600160a060020a03166370a082318860006040516020015260405160e060020a63ffffffff8416028152600160a060020a039091166004820152602401602060405180830381600087803b151561029a57600080fd5b6102c65a03f115156102ab57600080fd5b505050604051805190501492506102e0565b600092506102e0565b60038214156102bd5760018114806101dc57506003811492505b5050949350505050565b60005433600160a060020a0390811691161461030557600080fd5b6001805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b60005433600160a060020a0390811691161461034f57600080fd5b600160a060020a03909116600090815260026020526040902055565b42905600a165627a7a7230582011274152c48434a05e61e90f36dd6ea0c98e887cce0e808ed8c8091066e31b330029',
				gas: 1000000
			},
			function(e, r) {
				if (e) throw e;
				if (typeof r.address !== 'undefined') {
					console.log(
						'Deployed at ' + r.address + ' (tx: ' + r.transactionHash + ')'
					);
				}
			}
		).transactionHash
) {
	console.log('Deployment failed.  Probably web3.eth.accounts[0] is locked.');
}
